const i=self,a=["/","/index.html","/manifest.webmanifest","/icons/icon.svg"],h="static-v1",o="runtime-v1";i.addEventListener("install",n=>{n.waitUntil(caches.open(h).then(t=>t.addAll(a)).then(()=>i.skipWaiting()))});i.addEventListener("activate",n=>{n.waitUntil(caches.keys().then(t=>Promise.all(t.filter(e=>![h,o].includes(e)).map(e=>caches.delete(e)))).then(()=>i.clients.claim()))});i.addEventListener("fetch",n=>{const t=n.request,e=new URL(t.url);if(t.method==="GET"){if(e.origin===location.origin&&a.includes(e.pathname)){n.respondWith(caches.match(t).then(s=>s??fetch(t)));return}if(/\.(pbf|mvt|json)$/i.test(e.pathname)||e.hostname.includes("tiles")){n.respondWith(caches.open(o).then(async s=>{const l=await s.match(t),r=fetch(t).then(c=>(c&&c.status===200&&s.put(t,c.clone()),c));return l??r}));return}}});
